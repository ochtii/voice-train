<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Voice Recognition System</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="/static/js/websocket.js" defer></script>
    <script src="/static/js/audio-visualizer.js" defer></script>
    <script src="/static/js/dashboard.js" defer></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="nav-brand">
                <svg class="nav-icon" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 1L9 4H6C4.9 4 4 4.9 4 6V18C4 19.1 4.9 20 6 20H18C19.1 20 20 19.1 20 18V6C20 4.9 19.1 4 18 4H15L12 1ZM12 9C13.66 9 15 10.34 15 12S13.66 15 12 15 9 13.66 9 12 10.34 9 12 9Z"/>
                </svg>
                <div>
                    <div class="nav-title">Voice Recognition</div>
                    <div class="nav-subtitle">Real-time Dashboard</div>
                </div>
            </a>

            <div class="nav-menu">
                <a href="/dashboard" class="nav-link active">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 13H11V3H3V13ZM3 21H11V15H3V21ZM13 21H21V11H13V21ZM13 3V9H21V3H13Z"/>
                    </svg>
                    Dashboard
                </a>
                <a href="/enrollment" class="nav-link">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9.5C15 10.8 16.2 12 17.5 12S20 10.8 20 9.5H21ZM3 13C5.33 13 7.31 14.14 8.54 15.86L12 13L15.46 15.86C16.69 14.14 18.67 13 21 13V11C17.13 11 14 14.13 14 18V22H10V18C10 14.13 6.87 11 3 11V13Z"/>
                    </svg>
                    Speaker Enrollment
                </a>
                <a href="/devices" class="nav-link">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M4 6H20V16H4M20 18A2 2 0 0 0 22 16V6C22 4.89 21.1 4 20 4H4A2 2 0 0 0 2 6V16A2 2 0 0 0 4 18H0V20H24V18H20Z"/>
                    </svg>
                    Devices
                </a>
                <a href="/settings" class="nav-link">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"/>
                    </svg>
                    Settings
                </a>
            </div>

            <div class="nav-actions">
                <div class="connection-status" id="connectionStatus">
                    <div class="status-indicator" id="statusIndicator"></div>
                    <span id="statusText">Connecting...</span>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="theme-icon-light" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8M12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31L23.31,12L20,8.69Z"/>
                    </svg>
                    <svg class="theme-icon-dark" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.75,4.09L15.22,6.03L16.13,9.09L13.5,7.28L10.87,9.09L11.78,6.03L9.25,4.09L12.44,4L13.5,1L14.56,4L17.75,4.09M21.25,11L19.61,12.25L20.2,14.23L18.5,13.06L16.8,14.23L17.39,12.25L15.75,11L17.81,10.95L18.5,9L19.19,10.95L21.25,11M18.97,15.95C19.8,15.87 20.69,17.05 20.16,17.8C19.84,18.25 19.5,18.67 19.08,19.07C15.17,23 8.84,23 4.94,19.07C1.03,15.17 1.03,8.83 4.94,4.93C5.34,4.53 5.76,4.17 6.21,3.85C6.96,3.32 8.14,4.21 8.06,5.04C7.79,7.9 8.75,10.87 10.95,13.06C13.14,15.26 16.1,16.22 18.97,15.95M17.33,17.97C14.5,17.81 11.7,16.64 9.53,14.5C7.36,12.31 6.2,9.5 6.04,6.68C3.23,9.82 3.34,14.4 6.35,17.41C9.37,20.43 14,20.54 17.33,17.97Z"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="header-info">
                    <h1>ðŸš€ Auto-Deploy Dashboard</h1>
                    <p>Real-time voice recognition monitoring with automatic deployment system</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" id="refreshBtn">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                        </svg>
                        Refresh
                    </button>
                </div>
            </div>

            <!-- Status Cards Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 status-grid">
                <!-- System Status Card -->
                <div class="card status-card">
                    <div class="card-header">
                        <h3 class="card-title">System Status</h3>
                        <div class="status-badge" id="systemStatus">
                            <span class="status-dot"></span>
                            <span>Active</span>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="metric">
                            <div class="metric-label">Uptime</div>
                            <div class="metric-value" id="systemUptime">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">CPU Usage</div>
                            <div class="metric-value" id="cpuUsage">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Memory</div>
                            <div class="metric-value" id="memoryUsage">--</div>
                        </div>
                    </div>
                </div>

                <!-- Recognition Stats Card -->
                <div class="card status-card">
                    <div class="card-header">
                        <h3 class="card-title">Recognition Stats</h3>
                        <svg class="card-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9,11H15V13H9V11M9,7H15V9H9V7M9,15H13V17H9V15M12,1C10.89,1 10,1.89 10,3H14C14,1.89 13.1,1 12,1M18,3V5H19A2,2 0 0,1 21,7V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V7A2,2 0 0,1 5,5H6V3A2,2 0 0,1 8,1H16A2,2 0 0,1 18,3Z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="metric">
                            <div class="metric-label">Total Sessions</div>
                            <div class="metric-value" id="totalSessions">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Success Rate</div>
                            <div class="metric-value" id="successRate">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Active Sessions</div>
                            <div class="metric-value" id="activeSessions">--</div>
                        </div>
                    </div>
                </div>

                <!-- Audio Status Card -->
                <div class="card status-card">
                    <div class="card-header">
                        <h3 class="card-title">Audio Status</h3>
                        <svg class="card-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="metric">
                            <div class="metric-label">Input Level</div>
                            <div class="metric-value" id="audioLevel">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Quality Score</div>
                            <div class="metric-value" id="audioQuality">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Noise Level</div>
                            <div class="metric-value" id="noiseLevel">--</div>
                        </div>
                    </div>
                </div>

                <!-- Connected Devices Card -->
                <div class="card status-card">
                    <div class="card-header">
                        <h3 class="card-title">Connected Devices</h3>
                        <svg class="card-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M4,6H20V16H4M20,18A2,2 0 0,0 22,16V6C22,4.89 21.1,4 20,4H4A2,2 0 0,0 2,6V16A2,2 0 0,0 4,18H0V20H24V18H20Z"/>
                        </svg>
                    </div>
                    <div class="card-content">
                        <div class="metric">
                            <div class="metric-label">Bluetooth</div>
                            <div class="metric-value" id="bluetoothDevices">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">USB</div>
                            <div class="metric-value" id="usbDevices">--</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Network</div>
                            <div class="metric-value" id="networkDevices">--</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Dashboard Content -->
            <div class="grid grid-cols-1 lg:grid-cols-2 dashboard-content">
                <!-- Real-time Recognition Display -->
                <div class="card recognition-display">
                    <div class="card-header">
                        <h3 class="card-title">Live Recognition</h3>
                        <div class="recognition-controls">
                            <button class="btn btn-sm btn-secondary" id="pauseRecognition">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14,19H18V5H14M6,19H10V5H6V19Z"/>
                                </svg>
                                Pause
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="recognition-status">
                            <div class="current-speaker" id="currentSpeaker">
                                <div class="speaker-avatar">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                                    </svg>
                                </div>
                                <div class="speaker-info">
                                    <div class="speaker-name">Unknown Speaker</div>
                                    <div class="confidence-score">Confidence: --</div>
                                </div>
                            </div>
                            <div class="recognition-waveform">
                                <canvas id="waveformCanvas" width="400" height="100"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Audio Visualizer -->
                <div class="card audio-visualizer">
                    <div class="card-header">
                        <h3 class="card-title">Audio Spectrum</h3>
                        <div class="visualizer-controls">
                            <button class="btn btn-sm btn-secondary" id="toggleSpectrum">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M3,17H5V12H3V17M6,17H8V7H6V17M9,17H11V14H9V17M12,17H14V9H12V17M15,17H17V6H15V17M18,17H20V13H18V17Z"/>
                                </svg>
                                Toggle
                            </button>
                        </div>
                    </div>
                    <div class="card-content">
                        <div class="spectrum-display">
                            <canvas id="spectrumCanvas" width="400" height="200"></canvas>
                        </div>
                        <div class="frequency-info">
                            <div class="freq-label">0 Hz</div>
                            <div class="freq-label">1 kHz</div>
                            <div class="freq-label">4 kHz</div>
                            <div class="freq-label">8 kHz</div>
                        </div>
                    </div>
                </div>

                <!-- Speaker List -->
                <div class="card speaker-list">
                    <div class="card-header">
                        <h3 class="card-title">Enrolled Speakers</h3>
                        <a href="/enrollment" class="btn btn-sm btn-primary">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                            </svg>
                            Add Speaker
                        </a>
                    </div>
                    <div class="card-content">
                        <div class="speaker-items" id="speakerList">
                            <!-- Speaker items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card activity-log">
                    <div class="card-header">
                        <h3 class="card-title">Recent Activity</h3>
                        <button class="btn btn-sm btn-secondary" id="clearLog">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                            </svg>
                            Clear
                        </button>
                    </div>
                    <div class="card-content">
                        <div class="activity-items" id="activityLog">
                            <!-- Activity items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <div class="loading-text">Loading dashboard data...</div>
        </div>
    </div>

    <!-- Global Scripts -->
    <script src="/static/js/theme.js"></script>
    <script src="/static/js/notifications.js"></script>
</body>
</html>